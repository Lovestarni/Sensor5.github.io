<!-- udacimak v1.4.4 -->
<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta content="ie=edge" http-equiv="X-UA-Compatible"/>
  <title>
   Implementing RANSAC for Lines
  </title>
  <link href="../assets/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="../assets/css/plyr.css" rel="stylesheet"/>
  <link href="../assets/css/katex.min.css" rel="stylesheet"/>
  <link href="../assets/css/jquery.mCustomScrollbar.min.css" rel="stylesheet"/>
  <link href="../assets/css/styles.css" rel="stylesheet"/>
  <link href="../assets/img/udacimak.png" rel="shortcut icon" type="image/png">
  </link>
 </head>
 <body>
  <div class="wrapper">
   <nav id="sidebar">
    <div class="sidebar-header">
     <h3>
      Point Cloud Segmentation
     </h3>
    </div>
    <ul class="sidebar-list list-unstyled CTAs">
     <li>
      <a class="article" href="../index.html">
       Back to Home
      </a>
     </li>
    </ul>
    <ul class="sidebar-list list-unstyled components">
     <li class="">
      <a href="01. Segmentation.html">
       01. Segmentation
      </a>
     </li>
     <li class="">
      <a href="02. Michael on Detection and Segmentation.html">
       02. Michael on Detection and Segmentation
      </a>
     </li>
     <li class="">
      <a href="03. Point Processing.html">
       03. Point Processing
      </a>
     </li>
     <li class="">
      <a href="04. Segmenting the Plane with PCL.html">
       04. Segmenting the Plane with PCL
      </a>
     </li>
     <li class="">
      <a href="05. Separating Point Clouds.html">
       05. Separating Point Clouds
      </a>
     </li>
     <li class="">
      <a href="06. RANSAC.html">
       06. RANSAC
      </a>
     </li>
     <li class="">
      <a href="07. Implementing RANSAC for Lines.html">
       07. Implementing RANSAC for Lines
      </a>
     </li>
     <li class="">
      <a href="08. Extending RANSAC to Planes.html">
       08. Extending RANSAC to Planes
      </a>
     </li>
     <li class="">
      <a href="09. Michael on Segmenting the Plane.html">
       09. Michael on Segmenting the Plane
      </a>
     </li>
     <li class="">
      <a href="10. Outro.html">
       10. Outro
      </a>
     </li>
    </ul>
    <ul class="sidebar-list list-unstyled CTAs">
     <li>
      <a class="article" href="../index.html">
       Back to Home
      </a>
     </li>
    </ul>
   </nav>
   <div id="content">
    <header class="container-fluild header">
     <div class="container">
      <div class="row">
       <div class="col-12">
        <div class="align-items-middle">
         <button class="btn btn-toggle-sidebar" id="sidebarCollapse" type="button">
          <div>
          </div>
          <div>
          </div>
          <div>
          </div>
         </button>
         <h1 style="display: inline-block">
          07. Implementing RANSAC for Lines
         </h1>
        </div>
       </div>
      </div>
     </div>
    </header>
    <main class="container">
     <div class="row">
      <div class="col-12">
       <div class="ud-atom">
        <h3>
         <p>
          Implementing RANSAC for Lines
         </p>
        </h3>
        <div>
         <h1 id="implementing-ransac-for-lines">
          Implementing RANSAC for Lines
         </h1>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
         <p>
          ND313 C1 L2 A12 Implementing RANSAC For Lines [LB]
         </p>
        </h3>
        <video controls="">
         <source src="07. ND313 C1 L2 A12 Implementing RANSAC For Lines [LB]-IjT37Y7bpQU.mp4" type="video/mp4"/>
         <track default="true" kind="subtitles" label="en" src="07. ND313 C1 L2 A12 Implementing RANSAC For Lines [LB]-IjT37Y7bpQU.en.vtt" srclang="en"/>
        </video>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <p>
          Here you will complete a quiz that has you implement RANSAC for fitting a line in 2D point data with outliers. The quiz is located in
          <code>
           src/quiz/ransac/ransac2d.cpp
          </code>
          , and the function to fill out is
          <code>
           Ransac
          </code>
          , which takes in arguments for a point cloud, max iterations to run, and distance tolerance. The point cloud is actually
          <code>
           pcl::PointXYZ
          </code>
          but the z component will be set to zero to make things easy to visualize in 2D space.
         </p>
         <p>
          The data shown below was generated by creating a line with points slightly scattered, and then outliers were added by randomly placing points in the scene. You want to be able to identify which points belong to the line that was originally generated and which points are outliers. To do this you will randomly sample two points from the cloud and fit a line between the points. A helpful line equation for this problem can be seen below.
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
         <p>
          Point Data
         </p>
        </h3>
        <div>
         <figure class="figure">
          <img alt="Simple 2D Point Cloud Data" class="img img-fluid" src="img/ransac2d.png"/>
          <figcaption class="figure-caption">
           <p>
            Simple 2D Point Cloud Data
           </p>
          </figcaption>
         </figure>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
         <p>
          RANSAC Implementation
         </p>
        </h3>
        <div>
         <h2 id="equation-of-a-line-through-two-points-in-2d">
          Equation of a Line Through Two Points in 2D
         </h2>
         <p>
          For variables
          <span id="mathquill">
           x
          </span>
          and
          <span id="mathquill">
           y
          </span>
          and coefficients
          <span id="mathquill">
           A
          </span>
          ,
          <span id="mathquill">
           B
          </span>
          , and
          <span id="mathquill">
           C
          </span>
          , the general equation of a line is:
         </p>
         <div class="mathquill">
          Ax + By + C = 0
         </div>
         <p>
          Given two points: point1
          <span id="mathquill">
           (x1, y1)
          </span>
          and point2
          <span id="mathquill">
           (x2, y2)
          </span>
          , the line through point1 and point2 has the specific form:
         </p>
         <div class="mathquill">
          (y1 -y2)x + (x2 -x1)y + (x1*y2 -x2*y1) = 0
         </div>
         <h2 id="using-distance-to-find-the-best-line">
          Using Distance to Find the Best Line
         </h2>
         <p>
          After fitting the line you can then iterate through all the points and determine if they are inliers by measuring how far away each point is from the line. You can do this for each iteration keeping track of which fitted line had the highest number of inliers. The line with the most inliers will be the best model. The equation for calculating distance between a point and line is shown below. For further details see,
          <a href="https://brilliant.org/wiki/dot-product-distance-between-point-and-a-line/" rel="noopener noreferrer" target="_blank">
           https://brilliant.org/wiki/dot-product-distance-between-point-and-a-line/
          </a>
          .
         </p>
         <ul>
          <li>
           Line formula
           <span class="mathquill ud-math">
            Ax + By + C = 0
           </span>
          </li>
          <li>
           Point
           <span class="mathquill ud-math">
            (x,y)
           </span>
          </li>
          <li>
           Distance
           <span class="mathquill ud-math">
            d = |Ax+By+C|/sqrt(A^2+B^2)
           </span>
          </li>
         </ul>
         <p>
          Below are the results of doing RANSAC to fit a line from the data above. Inliers are green while outliers are red. The function had a max iteration count of 50 and a distance tolerance of 0.5. The max iteration size to run depends on the ratio of inliers to the total number of points. The more inliers our data contains the higher the probability of selecting inliers to fit the line to, and the fewer iterations you need to get a high probability of selecting a good model.
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
         <p>
          Point Data Segmented
         </p>
        </h3>
        <div>
         <figure class="figure">
          <img alt="Fitted Line using RANSAC" class="img img-fluid" src="img/ransac2dfitted.png"/>
          <figcaption class="figure-caption">
           <p>
            Fitted Line using RANSAC
           </p>
          </figcaption>
         </figure>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
         <p>
          Instructions
         </p>
        </h3>
        <div>
         <h2 id="instructions">
          Instructions
         </h2>
         <ul>
          <li>
           Go to
           <code>
            src/quiz/ransac/ransac2d.cpp
           </code>
          </li>
          <li>
           Complete the function
           <code>
            Ransac
           </code>
           following the instructions above
          </li>
         </ul>
         <h2 id="compilerun">
          Compile/Run
         </h2>
         <ul>
          <li>
           Go to
           <code>
            src/quiz/ransac
           </code>
          </li>
          <li>
           <code>
            mkdir build
           </code>
          </li>
          <li>
           <code>
            cd build
           </code>
          </li>
          <li>
           <code>
            cmake ..
           </code>
          </li>
          <li>
           <code>
            make
           </code>
          </li>
          <li>
           <code>
            ./quizRansac
           </code>
          </li>
         </ul>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div class="jumbotron">
         <h3>
          Workspace
         </h3>
         <p class="lead">
          This section contains either a workspace (it can be a
          <a href="http://jupyter.org/" target="_blank">
           Jupyter
      Notebook
          </a>
          workspace or an online code editor work space, etc.) and it cannot be automatically downloaded to be
    generated here. Please access the classroom with your account and manually download the workspace to your local
    machine. Note that for some courses, Udacity upload the workspace files onto
          <a href="https://github.com/udacity" target="_blank">
           https://github.com/udacity
          </a>
          , so you may be able to download them there.
         </p>
         <h4>
          Workspace Information:
         </h4>
         <ul>
          <li>
           <strong>
            Default file path:
           </strong>
          </li>
          <li>
           <strong>
            Workspace type:
           </strong>
           react
          </li>
          <li>
           <strong>
            Opened files (when workspace is loaded):
           </strong>
           n/a
          </li>
         </ul>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
         <p>
          Solution
         </p>
        </h3>
        <div>
         <h2 id="solution">
          Solution
         </h2>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
         <p>
          ND313 C1 L2 A17 Implementing RANSAC For Lines Solution [Too Long]
         </p>
        </h3>
        <video controls="">
         <source src="07. ND313 C1 L2 A17 Implementing RANSAC For Lines Solution [Too Long]-csyq4eYM480.mp4" type="video/mp4"/>
         <track default="true" kind="subtitles" label="en" src="07. ND313 C1 L2 A17 Implementing RANSAC For Lines Solution [Too Long]-csyq4eYM480.en.vtt" srclang="en"/>
        </video>
       </div>
       <div class="divider">
       </div>
      </div>
      <div class="col-12">
       <p class="text-right">
        <a class="btn btn-outline-primary mt-4" href="08. Extending RANSAC to Planes.html" role="button">
         Next Concept
        </a>
       </p>
      </div>
     </div>
    </main>
    <footer class="footer">
     <div class="container">
      <div class="row">
       <div class="col-12">
        <p class="text-center">
         udacity2.0 If you need the newest courses Plase add me wechat: udacity6
        </p>
       </div>
      </div>
     </div>
    </footer>
   </div>
  </div>
  <script src="../assets/js/jquery-3.3.1.min.js">
  </script>
  <script src="../assets/js/plyr.polyfilled.min.js">
  </script>
  <script src="../assets/js/bootstrap.min.js">
  </script>
  <script src="../assets/js/jquery.mCustomScrollbar.concat.min.js">
  </script>
  <script src="../assets/js/katex.min.js">
  </script>
  <script>
   // Initialize Plyr video players
    const players = Array.from(document.querySelectorAll('video')).map(p => new Plyr(p));

    // render math equations
    let elMath = document.getElementsByClassName('mathquill');
    for (let i = 0, len = elMath.length; i < len; i += 1) {
      const el = elMath[i];

      katex.render(el.textContent, el, {
        throwOnError: false
      });
    }

    // this hack will make sure Bootstrap tabs work when using Handlebars
    if ($('#question-tabs').length && $('#user-answer-tabs').length) {
      $("#question-tabs a.nav-link").on('click', function () {
        $("#question-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
      $("#user-answer-tabs a.nav-link").on('click', function () {
        $("#user-answer-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
    } else {
      $("a.nav-link").on('click', function () {
        $(".tab-pane").hide();
        $($(this).attr("href")).show();
      });
    }

    // side bar events
    $(document).ready(function () {
      $("#sidebar").mCustomScrollbar({
        theme: "minimal"
      });

      $('#sidebarCollapse').on('click', function () {
        $('#sidebar, #content').toggleClass('active');
        $('.collapse.in').toggleClass('in');
        $('a[aria-expanded=true]').attr('aria-expanded', 'false');
      });

      // scroll to first video on page loading
      if ($('video').length) {
        $('html,body').animate({ scrollTop: $('div.plyr').prev().offset().top});
      }

      // auto play first video: this may not work with chrome/safari due to autoplay policy
      if (players && players.length > 0) {
        players[0].play();
      }

      // scroll sidebar to current concept
      const currentInSideBar = $( "ul.sidebar-list.components li a:contains('07. Implementing RANSAC for Lines')" )
      currentInSideBar.css( "text-decoration", "underline" );
      $("#sidebar").mCustomScrollbar('scrollTo', currentInSideBar);
    });
  </script>
 </body>
</html>
