WEBVTT
Kind: captions
Language: zh-CN

00:00:00.370 --> 00:00:02.879
在本视频中 我们要学习

00:00:02.879 --> 00:00:07.500
如何选择噪音参数 以及如何评估选择

00:00:07.500 --> 00:00:10.689
这不仅和无损卡尔曼滤波器相关

00:00:10.689 --> 00:00:13.689
同样适用于贝叶斯滤波器

00:00:13.689 --> 00:00:17.747
我们讨论过程和测量模型时

00:00:17.748 --> 00:00:20.958
介绍过几种不确定性的来源

00:00:20.957 --> 00:00:25.177
在过程模型中 我们引入了过程噪音 vk

00:00:25.178 --> 00:00:26.827
在测量模型中

00:00:26.827 --> 00:00:30.039
我们引入了测量噪音 ωk

00:00:30.039 --> 00:00:34.424
在雷达测量中 这代表距离测量值噪音 ρ

00:00:34.424 --> 00:00:39.640
角测量值 φ 的噪音 以及径向速度 ρ 点的噪音

00:00:39.640 --> 00:00:44.579
我们还使用过程噪音协方差矩阵

00:00:44.579 --> 00:00:46.729
和测量噪音协方差矩阵进行了噪音量化

00:00:46.729 --> 00:00:48.817
这些是噪音的方差

00:00:48.817 --> 00:00:52.469
它们表示噪音强度

00:00:52.469 --> 00:00:56.460
但是 我们还不知道这些值是怎么来的

00:00:56.460 --> 00:00:58.500
我们从测量噪音开始

00:00:58.500 --> 00:01:02.600
测量噪音描述了传感器的测量精确度

00:01:02.600 --> 00:01:05.540
我们必须查看传感器手册

00:01:05.540 --> 00:01:08.030
查看其精确度

00:01:08.030 --> 00:01:12.810
例如 手册里可能说明 雷达能了两的距离为 ρ

00:01:12.810 --> 00:01:16.409
标准偏差为 0.3 米

00:01:16.409 --> 00:01:20.158
因此 我们就得到了σρ 的平方

00:01:20.159 --> 00:01:22.250
0.09 平方米

00:01:23.299 --> 00:01:27.099
我们还必须假设它是白噪音 正态分布

00:01:27.099 --> 00:01:29.739
当然 对有些传感器 这种假设是错的

00:01:29.739 --> 00:01:32.757
选择过程噪音要更难一些

00:01:32.757 --> 00:01:33.600
在现实中

00:01:33.600 --> 00:01:38.597
交通环境里的对象移动时加速噪音不是白噪音

00:01:38.597 --> 00:01:42.859
也就是说 司机会不断踩油门和刹车

00:01:42.859 --> 00:01:45.859
因此 我们在这里使用强近似

00:01:45.859 --> 00:01:48.299
假设过程噪音为白噪音

00:01:48.299 --> 00:01:51.789
要得到有用的值 一定要谨记下面的规则

00:01:51.790 --> 00:01:54.660
尽量估算你在环境中可能碰到的

00:01:54.659 --> 00:01:55.849
最大加速度

00:01:57.049 --> 00:02:00.140
比如 我们想追踪城市环境中的汽车

00:02:00.140 --> 00:02:02.239
这些车加速或刹车

00:02:02.239 --> 00:02:04.799
的加速度通常不会超过 6 米每平方秒

00:02:05.959 --> 00:02:07.649
现在 一定要记住

00:02:07.650 --> 00:02:12.390
选择预期最大加速度的一半作为过程噪音

00:02:12.389 --> 00:02:17.194
在本例中 我们选择 9 平方米每 s 的四次方

00:02:17.194 --> 00:02:18.679
作为加速噪音的方差

00:02:19.830 --> 00:02:23.629
这个值到底好不好 取决于你的应用

00:02:23.628 --> 00:02:27.247
应用对变更的反应很快是不是很重要？

00:02:27.247 --> 00:02:30.137
如果是 那你要选择更高一点的过程噪音

00:02:30.137 --> 00:02:32.914
提供平滑个估算是不是很重要？

00:02:32.914 --> 00:02:35.882
如果是 那你要选择更低一点的过程噪音

00:02:35.882 --> 00:02:39.286
当然 你通常都需要知道噪音参数设置

00:02:39.286 --> 00:02:40.520
是否正确

00:02:40.520 --> 00:02:44.340
为此 你可以运行滤波器一致性检查

00:02:44.340 --> 00:02:46.349
一致性是什么意思呢？

00:02:46.349 --> 00:02:51.519
在每个时间循环里 我们计算每次预测的测量预测值 zk+1|k

00:02:51.520 --> 00:02:54.870
以及协方差矩阵 S

00:02:54.870 --> 00:02:58.949
然后 我们收到该时间步的实际测量值 zk+1

00:02:58.949 --> 00:03:01.170
在本例中 看起来一切正常

00:03:01.169 --> 00:03:04.741
实际测量值在误差椭圆内部

00:03:04.741 --> 00:03:07.060
但实际情况中 看起来可能不一样

00:03:07.060 --> 00:03:10.439
假设你设置了一个滤波器 你的测量是这样的

00:03:10.439 --> 00:03:11.979
这里出了问题

00:03:11.979 --> 00:03:14.579
你每次都低估了预测测量值

00:03:14.580 --> 00:03:16.310
的不确定性

00:03:16.310 --> 00:03:18.830
这说明你的滤波器是不一致的

00:03:18.830 --> 00:03:21.641
当然 这些都是随机过程

00:03:21.640 --> 00:03:24.269
也可能是自然巧合

00:03:24.270 --> 00:03:26.719
但如果结果一直都这样

00:03:26.719 --> 00:03:29.250
那这个解释就过于牵强了

00:03:29.250 --> 00:03:32.199
结果告诉你 你的系统低估了

00:03:32.199 --> 00:03:33.389
不确定性

00:03:33.389 --> 00:03:36.669
估算的精确度比你想的要低

00:03:36.669 --> 00:03:39.079
在另一个方向 也可能发生同样的情况

00:03:39.080 --> 00:03:40.008
看这个例子

00:03:40.008 --> 00:03:43.676
这里 你高估了系统的不确定性

00:03:43.675 --> 00:03:47.799
也就是说 估算的精确度比你想的要高

00:03:47.800 --> 00:03:50.630
因此 滤波器也不一致

00:03:50.629 --> 00:03:54.799
滤波器一致是指 能提供真实的估算不确定性

00:03:55.969 --> 00:03:58.919
滤波器一致性检查很简单

00:03:58.919 --> 00:04:02.250
建议你在设计滤波器是 始终检查一致性

00:04:02.250 --> 00:04:05.189
有种重要的一致性检查 叫做 NIS

00:04:05.189 --> 00:04:08.109
全称是归一化新息平方

00:04:08.110 --> 00:04:10.665
这是 NIS 的计算方式

00:04:10.664 --> 00:04:11.769
它很直观

00:04:12.840 --> 00:04:15.870
新息是预测测量值和

00:04:15.870 --> 00:04:17.459
实际测量值之间的差

00:04:17.459 --> 00:04:22.340
归一化是指相对于矩阵 S 的协方差而言

00:04:22.339 --> 00:04:25.969
因此 我们这里有矩阵 S 的逆

00:04:25.970 --> 00:04:29.410
NIS 只是一个标量数字 计算超级简单

00:04:29.410 --> 00:04:31.570
但你要对数字有合理预期

00:04:31.569 --> 00:04:35.480
为此 你需要了解 NIS 的一些统计知识

00:04:35.480 --> 00:04:39.009
NIS 的值分布符合

00:04:39.009 --> 00:04:40.329
卡方分布

00:04:40.329 --> 00:04:44.769
如果你谷歌搜索卡方分布 你会找到这样的一个表格

00:04:44.769 --> 00:04:48.159
里面是 NIS 可能得到的数字结果

00:04:49.199 --> 00:04:51.659
我们找到本例中的正确数字

00:04:51.660 --> 00:04:53.660
DF 表示自由度

00:04:53.660 --> 00:04:55.647
这是测量空间的维度

00:04:55.646 --> 00:04:58.469
我们有一个三维的雷达测量值

00:04:58.470 --> 00:05:00.430
因此 我们有三个自由维度

00:05:01.439 --> 00:05:03.661
那这些数字都代表什么呢？

00:05:03.661 --> 00:05:08.604
0.95 代表 在统计意义上 所有情况下 有 95% 的概率

00:05:08.605 --> 00:05:12.319
你的 NIS 会超过 0.352

00:05:12.319 --> 00:05:19.620
这一栏说 在所有情况下 有 5% 的概率 你的 NIS 会超过 7.815

00:05:19.620 --> 00:05:22.564
我们记住这个数字 7.8

00:05:22.564 --> 00:05:27.124
设计滤波器时 一定要画出 95% 这条线

00:05:27.124 --> 00:05:29.319
在本例中 它的值是 7.8

00:05:29.319 --> 00:05:35.600
然后 对每个时间步 k 计算并画出 NIS 值

00:05:35.600 --> 00:05:39.629
如果你得到这样一张图 则一切很正常

00:05:39.629 --> 00:05:44.060
有时候会超过 95% 的线 但这和我们预期的一样

00:05:44.060 --> 00:05:48.199
如果你得到这样一张图 这说明系统低估了

00:05:48.199 --> 00:05:51.709
不确定性 就像我们之前看过的例子一样

00:05:51.709 --> 00:05:53.669
如果你得到这样一张图

00:05:53.670 --> 00:05:56.840
说明你高估了系统的不确定性

00:05:56.839 --> 00:06:00.009
你的估算的精确度比你想的要高

00:06:00.009 --> 00:06:04.689
不幸的是 NIS 练习不会告诉你错误原因

00:06:04.689 --> 00:06:06.709
但至少它提供了一些反馈信息

00:06:06.709 --> 00:06:10.689
例如 在本例中 你可以尝试降低过程噪音

00:06:10.689 --> 00:06:12.699
然后再试试

00:06:12.699 --> 00:06:16.610
在本课末尾的实战项目里 你需要检查你的 NIS

00:06:16.610 --> 00:06:19.009
并利用它检查你的过程噪音设置

